<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬°Est√°s Invitado al Cumple de Santiago!</title>
    <!-- Google Fonts - Press Start 2P (pixel) y Bungee (blocky/neon) o VT323 (pixel m√°s legible) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Bungee&family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css"> <!-- Enlazamos el CSS externo -->
</head>
<body>
    <div class="container" id="invitacionContainer">
        <div id="character" class="character"></div>
        
        <div class="header-title">
            <p class="sub-header-text">¬°Prep√°rate para el</p>
            <h1>NIVEL CUMPLEA√ëOS</h1>
            <p class="sub-header-text">de nuestro</p>
        </div>

        <h2 id="playerName">SANTIAGO ALFARO</h2>

        <div class="gif-container">
            <img id="randomGif" src="" alt="GIF Sorpresa" class="game-gif">
        </div>
        
        <p class="main-text">¬°Un momento especial para compartir y celebrar juntos en el cole!</p>

        <div class="details">
            <p><span class="icon">üóìÔ∏è</span> <strong>FECHA:</strong> Viernes, 16 de Mayo</p>
            <p><span class="icon">üïí</span> <strong>HORA:</strong> 13:30 hs.</p>
            <p><span class="icon">üìç</span> <strong>LUGAR:</strong> Gral. Elizardo Aquino (En el colegio)</p>
        </div>

        <div class="game-activities">
            <h3>¬°COMPARTIREMOS JUNTOS!</h3>
            <ul id="activities">
                <li>üéÇ Torta de cumplea√±os</li>
                <li>üßÉ Refrescos y golosinas</li>
                <li>üéâ Recreo con amigos</li>
                <li>üéà Fotos divertidas</li>
            </ul>
        </div>

        <div class="animation-container">
            <div id="powerUp" class="power-up">+1000 XP</div>
        </div>

        <p class="footer-text">¬°TE ESPERAMOS PARA CELEBRAR JUNTOS! <span class="icon">üéÇüéàüéâ</span></p>
        
        <button id="secretButton" class="secret-button">¬°JUEGA UN MINIJUEGO!</button>
    </div>

    <!-- √Årea del minijuego (inicialmente oculta) -->
    <div id="gameContainer" class="game-container" style="display:none;">
        <div class="game-header">
            <h3>¬°ATRAPA LOS REGALOS!</h3>
            <div class="game-stats">
                <p>Puntos: <span id="gameScore">0</span></p>
                <p>Tiempo: <span id="gameTimer">30</span>s</p>
            </div>
        </div>
        
        <div id="gameArea" class="game-area">
            <!-- Aqu√≠ aparecer√°n los regalos -->
        </div>
        
        <div class="game-controls">
            <button id="endGameButton" class="game-button">TERMINAR JUEGO</button>
        </div>
        
        <div id="gameResult" class="game-result" style="display:none;">
            <h3>¬°JUEGO TERMINADO!</h3>
            <p>Atrapaste <span id="finalScore">0</span> regalos</p>
            <p id="resultMessage">¬°Buen trabajo!</p>
            <button id="backToInvitationButton" class="game-button">VOLVER A LA INVITACI√ìN</button>
        </div>
    </div>

    <script>
        // Lista de GIFs de videojuegos para ni√±os
        const gifs = [
            "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExaGZqOXBidXhheTEwcGdhaDhsbGg2aGt1djdmZG52NGVjOGFyY2M0dCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/jIptvbaCKDs6VrCPPG/giphy.gif", // Mario Bros
            "https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExZW41dml1cnQyMmVvbWJxZ2M0eTlqd2Y0ZGg0ZHhybmVjM2x2amJqNyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/XOf2mdbvIkjhbnlDwQ/giphy.gif", // Minecraft
            "https://media.giphy.com/media/EktbegF3J8QIo/giphy.gif?cid=ecf05e47h7cbcgt6ys5irnucqbv8rz5if4zbwro3r5lusovf&ep=v1_gifs_search&rid=giphy.gif&ct=g", // Pikachu
            "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExdThkcWg1czBtcmZxNmRqMXRoN3dha3U1cmZ6dWNvcHVnOW82ZWRtcCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/WS6EEr4nIrJvuyZE0X/giphy.gif", // Sonic
            "https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExeGU2OGNpZWl6YzJxeXl6MGZrNTdiZXYzMTVjNDlyZXMxeHIxb3k2bSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/17EvcNvlvZ63ueEC7j/giphy.gif"  // Fortnite
        ];
        
        // Lista de personajes de juegos populares
        const characters = [
            "mario", "sonic", "pikachu", "steve", "roblox"
        ];
        
        // Seleccionar un GIF aleatorio
        const randomGif = gifs[Math.floor(Math.random() * gifs.length)];
        document.getElementById("randomGif").src = randomGif;
        
        // Cambiar el personaje para cada visitante
        const randomCharacter = characters[Math.floor(Math.random() * characters.length)];
        document.getElementById("character").classList.add(randomCharacter);
        document.getElementById("character").setAttribute("title", "¬°Juega con " + randomCharacter + "!");
        
        // Personalizar con el nombre del visitante (simulado)
        const visitorNames = ["Jugador", "Aventurero", "Explorador", "Gamer", "Campe√≥n"];
        const visitorName = visitorNames[Math.floor(Math.random() * visitorNames.length)];
        document.getElementById("playerName").innerHTML = "SANTIAGO ALFARO<br><span class='player-title'>" + visitorName + " Nivel 7</span>";

        // Minijuego: Atrapa los regalos
        const gameContainer = document.getElementById("gameContainer");
        const invitacionContainer = document.getElementById("invitacionContainer");
        const gameArea = document.getElementById("gameArea");
        const gameScore = document.getElementById("gameScore");
        const gameTimer = document.getElementById("gameTimer");
        const gameResult = document.getElementById("gameResult");
        const finalScore = document.getElementById("finalScore");
        const resultMessage = document.getElementById("resultMessage");
        const secretButton = document.getElementById("secretButton");
        const endGameButton = document.getElementById("endGameButton");
        const backToInvitationButton = document.getElementById("backToInvitationButton");

        let score = 0;
        let timeLeft = 30;
        let gameInterval;
        let timerInterval;
        let gameActive = false;
        
        // Tipos de regalos y sus puntos
        const giftTypes = [
            { emoji: "üéÅ", points: 1, speed: 3000 },
            { emoji: "üéÆ", points: 2, speed: 2500 },
            { emoji: "üéÇ", points: 3, speed: 2000 },
            { emoji: "‚≠ê", points: 5, speed: 1500 }
        ];

        // Iniciar el juego
        secretButton.addEventListener("click", startGame);
        endGameButton.addEventListener("click", endGame);
        backToInvitationButton.addEventListener("click", backToInvitation);

        function startGame() {
            // Ocultar invitaci√≥n, mostrar juego
            invitacionContainer.style.display = "none";
            gameContainer.style.display = "block";
            gameResult.style.display = "none";
            
            // Reiniciar variables del juego
            score = 0;
            timeLeft = 30;
            gameActive = true;
            gameScore.textContent = score;
            gameTimer.textContent = timeLeft;
            
            // Iniciar la aparici√≥n de regalos
            gameInterval = setInterval(createGift, 1000);
            
            // Iniciar el temporizador
            timerInterval = setInterval(updateTimer, 1000);
            
            // Reproducir sonido de inicio (opcional)
            const startSound = new Audio("https://www.myinstants.com/media/sounds/Mario-coin-sound.mp3");
            startSound.play();
        }

        function createGift() {
            if (!gameActive) return;
            
            // Crear un elemento de regalo
            const gift = document.createElement("div");
            gift.className = "game-gift";
            
            // Seleccionar un tipo de regalo aleatorio
            const giftType = giftTypes[Math.floor(Math.random() * giftTypes.length)];
            gift.textContent = giftType.emoji;
            gift.dataset.points = giftType.points;
            
            // Posicionar el regalo aleatoriamente en el √°rea de juego
            const maxX = gameArea.clientWidth - 50;
            const maxY = gameArea.clientHeight - 50;
            const posX = Math.floor(Math.random() * maxX);
            const posY = Math.floor(Math.random() * maxY);
            
            gift.style.left = posX + "px";
            gift.style.top = posY + "px";
            
            // A√±adir evento de clic para "atrapar" el regalo
            gift.addEventListener("click", function() {
                if (!gameActive) return;
                
                // Sumar puntos
                const points = parseInt(gift.dataset.points);
                score += points;
                gameScore.textContent = score;
                
                // Mostrar animaci√≥n de puntos
                const pointsAnim = document.createElement("div");
                pointsAnim.className = "points-animation";
                pointsAnim.textContent = "+" + points;
                pointsAnim.style.left = gift.style.left;
                pointsAnim.style.top = gift.style.top;
                gameArea.appendChild(pointsAnim);
                
                // Eliminar la animaci√≥n despu√©s de completarse
                setTimeout(() => {
                    gameArea.removeChild(pointsAnim);
                }, 1000);
                
                // Reproducir sonido
                const coinSound = new Audio("https://www.myinstants.com/media/sounds/smw_coin.mp3");
                coinSound.play();
                
                // Eliminar el regalo
                gameArea.removeChild(gift);
            });
            
            // A√±adir el regalo al √°rea de juego
            gameArea.appendChild(gift);
            
            // Eliminar el regalo si no se atrapa a tiempo
            setTimeout(() => {
                if (gift.parentNode === gameArea) {
                    gameArea.removeChild(gift);
                }
            }, giftType.speed);
        }

        function updateTimer() {
            timeLeft--;
            gameTimer.textContent = timeLeft;
            
            if (timeLeft <= 0) {
                endGame();
            }
        }

        function endGame() {
            // Detener los intervalos
            clearInterval(gameInterval);
            clearInterval(timerInterval);
            gameActive = false;
            
            // Eliminar todos los regalos restantes
            while (gameArea.firstChild) {
                gameArea.removeChild(gameArea.firstChild);
            }
            
            // Mostrar resultado
            finalScore.textContent = score;
            
            // Mensaje personalizado seg√∫n la puntuaci√≥n
            if (score >= 20) {
                resultMessage.textContent = "¬°INCRE√çBLE! ¬°Eres un experto atrapando regalos!";
            } else if (score >= 10) {
                resultMessage.textContent = "¬°MUY BIEN! ¬°Santiago estar√° feliz!";
            } else {
                resultMessage.textContent = "¬°Gracias por jugar! ¬°Nos vemos en la fiesta!";
            }
            
            // Mostrar panel de resultados
            gameResult.style.display = "block";
            
            // Reproducir sonido de fin de juego
            const endSound = new Audio("https://www.myinstants.com/media/sounds/smb_stage_clear.mp3");
            endSound.play();
        }

        function backToInvitation() {
            // Ocultar juego, mostrar invitaci√≥n
            gameContainer.style.display = "none";
            invitacionContainer.style.display = "block";
            
            // Mostrar animaci√≥n de poder
            const powerUp = document.getElementById("powerUp");
            powerUp.textContent = "+" + score + " XP";
            powerUp.style.display = "block";
            powerUp.classList.add("animate");
            
            // Ocultar la animaci√≥n despu√©s de completarse
            setTimeout(() => {
                powerUp.style.display = "none";
                powerUp.classList.remove("animate");
                powerUp.textContent = "+1000 XP";
            }, 2000);
        }
    </script>
</body>
</html>
