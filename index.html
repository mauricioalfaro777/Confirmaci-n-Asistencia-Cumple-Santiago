<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬°CONVOCATORIA ESTELAR: Cumple de Santiago!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Oswald:wght@400;500;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Estilos inline b√°sicos (confeti, name-prompt, tutorial, high-scores) - Se mantienen pero se adaptar√°n con el CSS general */
        .confetti { position: fixed; width: 10px; height: 10px; top: -10px; border-radius: 50%; animation: confetti-fall 5s linear forwards; z-index: 1000; }
        @keyframes confetti-fall { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
        
        .name-prompt, .tutorial {
            max-width: 500px; margin: 15% auto; /* Reducido margen superior */
            background-color: var(--color-black-transparent);
            border: 2px solid var(--color-primary-pink);
            box-shadow: 0 0 20px var(--color-primary-pink-glow);
            padding: 30px; border-radius: 12px; text-align: center;
            color: var(--color-white);
            position: relative; /* Para z-index si es necesario */
            z-index: 1010; /* Asegurar que est√©n por encima de otros elementos */
        }
        .name-prompt input {
            background-color: rgba(255, 255, 255, 0.1); border: 2px solid var(--color-primary-pink);
            color: var(--color-white); padding: 12px 15px; font-size: 1.1rem; margin: 20px 0; border-radius: 8px;
            font-family: 'Roboto', sans-serif; width: 85%; box-sizing: border-box;
        }
        .high-scores { margin-top: 25px; border-top: 2px dashed var(--color-primary-pink); padding-top: 20px; }
        .high-scores h4 { color: var(--color-primary-pink); margin-bottom: 12px; font-family: 'Oswald', sans-serif; font-size: 1.3rem; }
        .high-scores ul { list-style: none; padding: 0; margin: 8px 0; font-size: 1rem; }
        
        .tutorial-step { display: flex; align-items: center; margin: 18px 0; justify-content: center; font-size: 1.15rem; }
        .tutorial-icon { font-size: 2rem; margin-right: 15px; animation: pulseSoccer 1.5s infinite; color: var(--color-primary-pink); }
        @keyframes pulseSoccer { 0% { transform: scale(1); } 50% { transform: scale(1.15); } 100% { transform: scale(1); } }
        
        .sound-control {
            position: fixed; top: 25px; right: 25px; /* Movido a la derecha */ z-index: 1001;
        }
        .sound-button {
            background-color: var(--color-primary-pink); color: var(--color-black);
            font-family: 'Anton', sans-serif; font-size: 1.6rem;
            padding: 0; border: none;
            border-radius: 50%; cursor: pointer; transition: all 0.2s ease-in-out;
            width: 50px; height: 50px; display: flex;
            align-items: center; justify-content: center;
            box-shadow: 0 3px 8px rgba(0,0,0,0.4);
        }
        .sound-button:hover { background-color: var(--color-secondary-pink); transform: scale(1.1); }
        .sound-button:active { transform: scale(0.98) translateY(1px); }

        .minigame-notice {
            position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%);
            background-color: var(--color-primary-pink); color: var(--color-black);
            padding: 12px 25px; border-radius: 30px;
            font-family: 'Oswald', sans-serif; font-weight: 500; font-size: 1rem; text-transform: uppercase;
            box-shadow: 0 0 20px var(--color-primary-pink-glow);
            z-index: 1002; opacity: 0;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            pointer-events: none;
        }
        .minigame-notice.show { opacity: 1; transform: translateX(-50%) translateY(-10px); }
        .minigame-notice::after {
            content: ''; position: absolute; bottom: -10px; left: 50%;
            transform: translateX(-50%); width: 0; height: 0;
            border-left: 10px solid transparent; border-right: 10px solid transparent;
            border-top: 10px solid var(--color-primary-pink);
        }
    </style>
</head>
<body>
    <div class="invitation-wrapper" id="invitacionContainer">
        <header class="invitation-header">
            <p class="sub-header-text">¬°Has sido fichado para el</p>
            <h1>CUMPLEA√ëOS DE CAMPE√ìN</h1>
            <p class="sub-header-text">de nuestro N√öMERO 1</p>
        </header>

        <div class="player-card">
            <h2 id="playerName" class="player-name">SANTIAGO ALFARO</h2>
            <div class="player-image-container">
                <img id="mainInvitationImage" src="img/placeholder-santiago-messi.png" alt="Celebraci√≥n de Cumplea√±os de Santiago" class="main-image">
            </div>
            <p class="main-text">¬°Prep√°rate para un d√≠a lleno de f√∫tbol, amigos y mucha diversi√≥n en la Escuela!</p>
        </div>

        <section class="details-section">
            <h3>DETALLES DEL PARTIDO</h3>
            <div class="details-grid">
                <p><span class="icon">üóìÔ∏è</span> <strong>FECHA:</strong> Viernes, 16 de Mayo</p>
                <p><span class="icon">üïí</span> <strong>HORA:</strong> 13:30 hs.</p>
                <p><span class="icon">üìç</span> <strong>ESTADIO:</strong> Gral. Elizardo Aquino (¬°La Cancha!)</p>
            </div>
        </section>

        <section class="activities-section">
            <h3>CRONOGRAMA DE LA JORNADA</h3>
            <ul id="activities">
                <li><span class="li-icon">‚öΩ</span> Calentamiento y partidito amistoso</li>
                <li><span class="li-icon">üéÇ</span> Entrega de trofeos (¬°y torta!) al cumplea√±ero</li>
                <li><span class="li-icon">ü•§</span> Hidrataci√≥n y snacks en el vestuario</li>
                <li><span class="li-icon">üì∏</span> Sesi√≥n de fotos con la estrella del d√≠a</li>
            </ul>
        </section>
        
        <div class="gif-banner-container">
            <img id="dynamicSoccerGif" src="" alt="Animaci√≥n de f√∫tbol" class="dynamic-gif">
        </div>

        <div class="animation-container">
            <div id="powerUp" class="power-up">+1 GOLAZO</div>
        </div>

        <p class="footer-text">¬°TU PRESENCIA ES CLAVE PARA LA VICTORIA! <span class="icon">üèÜüéâ‚öΩ</span></p>
        
        <button id="secretButton" class="action-button primary">¬°MINIJUEGO: TIRO AL ARCO!</button>
        <div id="minigameNotice" class="minigame-notice">¬°Hey! ¬°Prueba tu punter√≠a! üëá</div>
    </div>

    <div id="namePrompt" class="name-prompt" style="display:none;">
        <h3>¬°REGISTRA TU NOMBRE DE CRACK!</h3>
        <input type="text" id="playerNameInput" maxlength="15" placeholder="Ej: ElPibeDeOro">
        <button id="startWithNameButton" class="action-button">¬°A LA CANCHA!</button>
    </div>

    <div id="tutorial" class="tutorial" style="display:none;">
        <h3>MINIJUEGO: ¬°A METER GOLES!</h3>
        <div class="tutorial-step">
            <div class="tutorial-icon">üéØ</div> <p>Apunta y haz clic en los objetivos.</p>
        </div>
        <div class="tutorial-step">
            <div class="tutorial-icon">‚è±Ô∏è</div> <p>Tienes 30 segundos para anotar.</p>
        </div>
        <div class="tutorial-step">
            <div class="tutorial-icon">‚≠ê</div> <p>¬°Los objetivos dorados valen m√°s puntos!</p>
        </div>
        <button id="startAfterTutorial" class="action-button">¬°VAMOS A JUGAR!</button>
    </div>

    <div class="sound-control">
        <button id="soundButton" class="sound-button" title="Activar/Desactivar m√∫sica">üîá</button>
    </div>

    <div id="gameContainer" class="game-container" style="display:none;">
        <div class="game-header">
            <h3>¬°DEMUESTRA TU PUNTER√çA!</h3>
            <div class="game-stats">
                <p>Goles: <span id="gameScore">0</span></p>
                <p>Tiempo: <span id="gameTimer">30</span>s</p>
            </div>
        </div>
        <div id="gameArea" class="game-area">
        </div>
        <div class="game-controls">
            <button id="endGameButton" class="action-button secondary">TERMINAR PARTIDO</button>
        </div>
    </div>
    <div id="gameResult" class="game-result" style="display:none;">
        <div> 
            <h3>¬°PARTIDO FINALIZADO!</h3>
            <p>Anotaste <span id="finalScoreDisplay">0</span> Goles</p>
            <p id="resultMessage">¬°Gran actuaci√≥n!</p>
            <button id="backToInvitationButton" class="action-button primary">VOLVER A LA INVITACI√ìN</button>
            <div class="high-scores">
                <h4>TABLA DE GOLEADORES</h4>
                <ul id="highScoresList"></ul>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {

        // --- ELEMENTOS DEL DOM ---
        const mainInvitationImage = document.getElementById("mainInvitationImage");
        const dynamicSoccerGifElement = document.getElementById("dynamicSoccerGif");
        const playerNameElement = document.getElementById("playerName");
        const gameContainer = document.getElementById("gameContainer");
        const invitacionContainer = document.getElementById("invitacionContainer");
        const gameArea = document.getElementById("gameArea");
        const gameScoreDisplay = document.getElementById("gameScore");
        const gameTimerDisplay = document.getElementById("gameTimer");
        const gameResultPopup = document.getElementById("gameResult");
        const finalScoreDisplay = document.getElementById("finalScoreDisplay");
        const resultMessage = document.getElementById("resultMessage");
        const secretButton = document.getElementById("secretButton");
        const endGameButton = document.getElementById("endGameButton");
        const backToInvitationButton = document.getElementById("backToInvitationButton");
        const soundButton = document.getElementById("soundButton");
        const playerNameInput = document.getElementById("playerNameInput");
        const startWithNameButton = document.getElementById("startWithNameButton");
        const namePrompt = document.getElementById("namePrompt");
        const tutorial = document.getElementById("tutorial");
        const startAfterTutorial = document.getElementById("startAfterTutorial");
        const minigameNoticeElement = document.getElementById("minigameNotice");
        const powerUpElement = document.getElementById("powerUp");

        // --- CONFIGURACI√ìN Y DATOS ---
        const dynamicGifs = [
            "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExc3RpdTc5YzFpcHhiZTF6c3ExeG15d3U2ODd3ZnM2eW5vbXNsbHlmNSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/waCWiXgm8dDkTggARm/giphy.gif", 
            "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExajgzdXVodGFidWlhcjExMDZqZXg2ZzhpNzBneWtnM3k2cWR1MmZsYyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/pN3fM4bIDBeBVTY6Sn/giphy.gif",
            "https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExY25yajBqcnE2OWswdnQ1cGt5MHJwY2g1bzhncTV6b29wejczYXd1dyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/8OJvD6X5p7iS39PbK0/giphy.gif",
            "https://media.giphy.com/media/85wLxLsRtrFHZcFmZk/giphy.gif?cid=ecf05e47o6id0go5gjzp0r5pcijukk630wz6pqdhnmycz8o5&ep=v1_gifs_search&rid=giphy.gif&ct=g"
        ];

        if (dynamicSoccerGifElement && dynamicGifs.length > 0) {
            dynamicSoccerGifElement.src = dynamicGifs[Math.floor(Math.random() * dynamicGifs.length)];
        } else if (dynamicSoccerGifElement) {
            dynamicSoccerGifElement.style.display = 'none';
        }
        
        let score = 0;
        let timeLeft = 30;
        let gameInterval;
        let timerInterval;
        let gameActive = false;
        let currentPlayerName = "Jugador Estrella";

        const gameItems = [
            { emoji: "‚öΩ", points: 1, speed: 2200, itemClass: "target-ball" },
            { emoji: "üéØ", points: 2, speed: 1800, itemClass: "target-diana" },
            { emoji: "‚≠ê", points: 5, speed: 1500, itemClass: "target-star" }
        ];

        // --- AUDIO ---
        const musicPlaylist = [
            'audio/eFootball 2025 Soundtrack - Manifest by Crystal Fighters.mp3',
            'audio/eFootball 2025 Soundtrack - American Adrenaline by KAWALA.mp3',
            'audio/All I Want - Lane 8 ft. Arctic Lake (FIFA 23 Official Soundtrack).mp3'
        ];
        let currentTrackIndex = 0; 
        let audioPlayer = new Audio(); 
        let musicPlaying = false; // Inicialmente la m√∫sica no est√° sonando
        let wasMusicPlayingBeforeGame = false;

        let gameStartSound; 
        let scoreSound;     
        let gameEndSound;  

        function initializeAudioPlayer() {
            if (musicPlaylist.length === 0) {
                console.warn("La lista de reproducci√≥n de m√∫sica est√° vac√≠a.");
                if(soundButton) soundButton.disabled = true;
                return;
            }
            try {
                // Seleccionar pista inicial aleatoria
                currentTrackIndex = Math.floor(Math.random() * musicPlaylist.length);
                audioPlayer.src = musicPlaylist[currentTrackIndex];
                audioPlayer.volume = 0.15;
                audioPlayer.onended = playNextTrack; // Configurar para reproducir la siguiente al terminar

                // Intentar autoplay
                const playPromise = audioPlayer.play();
                if (playPromise !== undefined) {
                    playPromise.then(_ => {
                        // Autoplay iniciado con √©xito
                        musicPlaying = true;
                        if (soundButton) soundButton.textContent = "üîä";
                        console.log("Autoplay de m√∫sica iniciado con: " + musicPlaylist[currentTrackIndex]);
                    }).catch(error => {
                        // Autoplay bloqueado o fallido
                        musicPlaying = false;
                        if (soundButton) soundButton.textContent = "üîá";
                        console.log("Autoplay de m√∫sica bloqueado. El usuario debe interactuar primero. Error: ", error);
                    });
                }
            } catch (e) {
                console.error("Error al inicializar el reproductor de audio:", e);
                if(soundButton) soundButton.disabled = true;
                musicPlaying = false; // Asegurar que el estado sea falso
                if (soundButton) soundButton.textContent = "üîá";
            }
        }

        function playNextTrack() {
            // Reproducci√≥n secuencial despu√©s de la primera pista aleatoria
            currentTrackIndex = (currentTrackIndex + 1) % musicPlaylist.length;
            audioPlayer.src = musicPlaylist[currentTrackIndex];
            if (musicPlaying) { 
                audioPlayer.play().catch(e => console.error("Error al reproducir la siguiente pista: " + musicPlaylist[currentTrackIndex], e));
            }
        }
        
        // Llama a initializeAudioPlayer aqu√≠, despu√©s de que el DOM est√© cargado.
        // No es necesario llamarlo de nuevo en el event listener del bot√≥n de sonido a menos que falle la carga inicial.
        initializeAudioPlayer(); 

        if (soundButton) {
            soundButton.addEventListener("click", function() {
                if (musicPlaylist.length === 0) return; 

                // Si el audioPlayer no tiene una fuente (caso raro, pero por si acaso)
                if (!audioPlayer.src && musicPlaylist.length > 0) {
                    console.log("Fuente de audio no encontrada, re-inicializando con pista aleatoria.");
                    currentTrackIndex = Math.floor(Math.random() * musicPlaylist.length);
                    audioPlayer.src = musicPlaylist[currentTrackIndex];
                    audioPlayer.onended = playNextTrack;
                    audioPlayer.volume = 0.15;
                }
                
                if (musicPlaying) {
                    audioPlayer.pause();
                    soundButton.textContent = "üîá";
                    musicPlaying = false;
                } else {
                    // Intenta reproducir la pista actual. Si falla (ej. por pol√≠ticas del navegador a√∫n sin interacci√≥n suficiente),
                    // el catch lo manejar√°.
                    audioPlayer.play().then(() => {
                        soundButton.textContent = "üîä";
                        musicPlaying = true;
                    }).catch(e => {
                        console.error("Error al reproducir m√∫sica por clic:", e);
                        soundButton.textContent = "üîá"; 
                        musicPlaying = false;
                    });
                }
            });
        }
        
        function stopSound(soundInstance) {
            if (soundInstance) {
                soundInstance.pause();
                soundInstance.currentTime = 0;
            }
        }

        // --- NAVEGACI√ìN Y BOTONES ---
        if (secretButton) {
            secretButton.addEventListener("click", function() {
                if (invitacionContainer) invitacionContainer.style.display = "none";
                if (namePrompt) namePrompt.style.display = "block";
                if (minigameNoticeElement) minigameNoticeElement.classList.remove('show');
                if (secretButton) secretButton.classList.remove('highlight-game'); 
            });
        }
        if (startWithNameButton) {
            startWithNameButton.addEventListener("click", function() {
                currentPlayerName = playerNameInput.value.trim() || "Crack An√≥nimo";
                if (namePrompt) namePrompt.style.display = "none";
                if (tutorial) tutorial.style.display = "block";
            });
        }
        if (startAfterTutorial) {
            startAfterTutorial.addEventListener("click", function() {
                if (tutorial) tutorial.style.display = "none";
                startGame();
            });
        }
        if (endGameButton) endGameButton.addEventListener("click", endGame);
        if (backToInvitationButton) {
            backToInvitationButton.addEventListener("click", function() {
                if (gameResultPopup) gameResultPopup.style.display = "none";
                backToInvitation();
            });
        }

        // --- L√ìGICA DEL MINIJUEGO ---
        function startGame() {
            stopSound(gameEndSound);
            wasMusicPlayingBeforeGame = musicPlaying; 
            if (musicPlaying && audioPlayer) audioPlayer.pause();

            if (invitacionContainer) invitacionContainer.style.display = "none";
            if (gameContainer) gameContainer.style.display = "block";
            if (gameResultPopup) gameResultPopup.style.display = "none";
            
            score = 0; timeLeft = 30; gameActive = true;
            if (gameScoreDisplay) gameScoreDisplay.textContent = score;
            if (gameTimerDisplay) gameTimerDisplay.textContent = timeLeft;
            
            if(gameArea) gameArea.innerHTML = '';
            gameInterval = setInterval(createGameItem, 1100);
            timerInterval = setInterval(updateTimer, 1000);
            
            gameStartSound = new Audio("audio/Mario-coin-sound.mp3"); 
            gameStartSound.volume = 0.4;
            gameStartSound.play().catch(e => console.error("Error al reproducir sonido de inicio de juego:", e));
        }

        function createGameItem() {
            if (!gameActive || !gameArea) return;
            const item = document.createElement("div");
            const itemDetails = gameItems[Math.floor(Math.random() * gameItems.length)];
            
            item.className = "game-item " + (itemDetails.itemClass || "");
            item.textContent = itemDetails.emoji;
            item.dataset.points = itemDetails.points;
            
            const gameAreaRect = gameArea.getBoundingClientRect();
            const itemSize = Math.min(gameAreaRect.width, gameAreaRect.height) * 0.15;
            item.style.fontSize = `${itemSize}px`;

            const maxX = gameAreaRect.width - itemSize * 1.2;
            const maxY = gameAreaRect.height - itemSize * 1.2;
            const posX = Math.max(0, Math.floor(Math.random() * maxX));
            const posY = Math.max(0, Math.floor(Math.random() * maxY));
            item.style.left = posX + "px"; 
            item.style.top = posY + "px";
            
            item.addEventListener("click", function() {
                if (!gameActive || !item.parentNode || item.parentNode !== gameArea) return;
                const points = parseInt(item.dataset.points);
                score += points; 
                if (gameScoreDisplay) gameScoreDisplay.textContent = score;
                
                const pointsAnim = document.createElement("div");
                pointsAnim.className = "points-animation"; 
                pointsAnim.textContent = (points > 1) ? `¬°GOLAZO! +${points}` : `¬°GOL! +${points}`;
                if (itemDetails.itemClass === "target-star") pointsAnim.classList.add("golden");
                pointsAnim.style.left = item.style.left; 
                pointsAnim.style.top = item.style.top;
                gameArea.appendChild(pointsAnim);
                setTimeout(() => { if (pointsAnim.parentNode === gameArea) gameArea.removeChild(pointsAnim); }, 1200);
                
                scoreSound = new Audio("audio/smw_coin.mp3"); 
                scoreSound.volume = 0.5;
                scoreSound.play().catch(e => console.error("Error al reproducir sonido de gol:", e));
                
                gameArea.removeChild(item);
            });
            gameArea.appendChild(item);
            setTimeout(() => {
                if (gameActive && item.parentNode === gameArea) gameArea.removeChild(item);
            }, itemDetails.speed);
        }

        function updateTimer() {
            timeLeft--; 
            if (gameTimerDisplay) gameTimerDisplay.textContent = timeLeft;
            if (timeLeft <= 0) endGame();
        }

        function endGame() {
            if (!gameActive) return;
            stopSound(gameStartSound); stopSound(scoreSound);
            clearInterval(gameInterval); clearInterval(timerInterval); gameActive = false;
            
            if (finalScoreDisplay) finalScoreDisplay.textContent = score;
            if (resultMessage) {
                if (score >= 15) resultMessage.textContent = "¬°QU√â CRACK! ¬°Dominaste el √°rea!";
                else if (score >= 8) resultMessage.textContent = "¬°BUENA DEFINICI√ìN! ¬°Santiago estar√° orgulloso!";
                else resultMessage.textContent = "¬°Gracias por participar! ¬°Te esperamos en la fiesta!";
            }
            if (gameResultPopup) gameResultPopup.style.display = "flex";
            
            gameEndSound = new Audio("audio/smb_stage_clear.mp3"); 
            gameEndSound.volume = 0.5;
            gameEndSound.play().catch(e => console.error("Error al reproducir sonido de fin de juego:", e));
            
            showConfetti(); 
            saveHighScore(currentPlayerName, score);
        }

        function backToInvitation() {
            stopSound(gameStartSound); stopSound(scoreSound); stopSound(gameEndSound);

            // Reanudar m√∫sica si estaba sonando antes del juego
            if (wasMusicPlayingBeforeGame && audioPlayer && audioPlayer.src) {
                audioPlayer.play().catch(e => console.error("Error al reanudar m√∫sica:", e));
                // musicPlaying ya deber√≠a ser true en este caso
            }
            // Actualizar el icono del bot√≥n de sonido en base al estado actual de musicPlaying
            if (soundButton) soundButton.textContent = musicPlaying ? "üîä" : "üîá";

            if (gameContainer) gameContainer.style.display = "none"; 
            if (invitacionContainer) invitacionContainer.style.display = "block";
            
            if (powerUpElement) {
                powerUpElement.textContent = `+${score} GOLES!`;
                powerUpElement.style.display = "block";
                powerUpElement.classList.add("animate");
                setTimeout(() => {
                    powerUpElement.style.display = "none";
                    powerUpElement.classList.remove("animate");
                }, 2000);
            }
        }

        function showConfetti() {
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement("div");
                confetti.className = "confetti";
                confetti.style.left = Math.random() * 100 + "vw";
                confetti.style.animationDelay = Math.random() * 4 + "s";
                confetti.style.backgroundColor = ['var(--color-primary-pink)', 'var(--color-black)', 'var(--color-white)', 'var(--color-gold-star)'][Math.floor(Math.random() * 4)];
                document.body.appendChild(confetti);
                setTimeout(() => { if (confetti.parentNode === document.body) document.body.removeChild(confetti); }, 4000);
            }
        }
        
        function saveHighScore(name, scoreValue) {
            let highScores = JSON.parse(localStorage.getItem('soccerStarHighScores')) || [];
            highScores.push({ name: name, score: scoreValue, date: new Date().toLocaleDateString() });
            highScores.sort((a, b) => b.score - a.score);
            highScores = highScores.slice(0, 5); 
            localStorage.setItem('soccerStarHighScores', JSON.stringify(highScores));
            updateHighScoresList();
        }
        
        function updateHighScoresList() {
            const highScoresList = document.getElementById("highScoresList");
            if (!highScoresList) return;
            highScoresList.innerHTML = "";
            const highScores = JSON.parse(localStorage.getItem('soccerStarHighScores')) || [];
            if (highScores.length === 0) {
                const li = document.createElement("li");
                li.textContent = "¬°S√© el primero en anotar!";
                highScoresList.appendChild(li);
            } else {
                highScores.forEach((record, index) => {
                    const li = document.createElement("li");
                    li.textContent = `${index + 1}. ${record.name}: ${record.score} Goles`;
                    highScoresList.appendChild(li);
                });
            }
        }
        
        // --- INICIALIZACI√ìN FINAL ---
        updateHighScoresList(); 

        if (secretButton && minigameNoticeElement) {
            setTimeout(() => {
                minigameNoticeElement.classList.add('show');
                if(secretButton) secretButton.classList.add('highlight-game');
            }, 2500); 
            setTimeout(() => {
                minigameNoticeElement.classList.remove('show');
                if(secretButton) secretButton.classList.remove('highlight-game');
            }, 8000); 
        }

        // El estado inicial del bot√≥n de sonido se establece dentro de initializeAudioPlayer()
        // despu√©s del intento de autoplay.
    });
    </script>
</body>
</html>
